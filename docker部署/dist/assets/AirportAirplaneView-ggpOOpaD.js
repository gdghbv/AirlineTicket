import{_ as ae,r as w,x as B,B as le,c as te,a as S,d as e,w as l,e as r,E as b,z as oe,o as E,f as u,l as V,D as ne,G as re,H as se,m as ie,h as ue,t as h,I as de,J as pe,K as me}from"./index-DuoLJuUX.js";import{h as ge,i as _e,j as fe,k as ce}from"./airport-DZ6oIf4n.js";import"./request-DuNoOhOk.js";const we={class:"airplane-management"},be={class:"page-header"},ye={class:"seat-info"},ve={class:"dialog-footer"},Se={__name:"AirportAirplaneView",setup(Ve){const C=w(!1),K=w([]),_=w(!1),A=w("添加飞机"),y=w(!1),z=w(null),i=B({nameKeyword:"",statusKeyword:"",locationKeyword:"",pageNum:1,pageSize:10}),s=B({pageNum:1,pageSize:10,totalSize:0,totalPage:0}),n=B({airplaneId:null,airplaneName:"",status:"",location:"",firstSeat:0,secondSeat:0,thirdSeat:0}),M={airplaneName:[{required:!0,message:"请输入飞机名称",trigger:"blur"},{min:2,max:50,message:"飞机名称长度在 2 到 50 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择飞机状态",trigger:"change"}],location:[{required:!0,message:"请输入飞机位置",trigger:"blur"},{min:2,max:50,message:"位置长度在 2 到 50 个字符",trigger:"blur"}],firstSeat:[{required:!0,message:"请输入头等舱座位数",trigger:"blur"},{type:"number",min:0,message:"座位数不能小于0",trigger:"blur"}],secondSeat:[{required:!0,message:"请输入商务舱座位数",trigger:"blur"},{type:"number",min:0,message:"座位数不能小于0",trigger:"blur"}],thirdSeat:[{required:!0,message:"请输入经济舱座位数",trigger:"blur"},{type:"number",min:0,message:"座位数不能小于0",trigger:"blur"}]},j=o=>({航行中:"success",维护中:"warning",已着陆:"info"})[o]||"info",m=async()=>{try{C.value=!0;const o={nameKeyword:i.nameKeyword,statusKeyword:i.statusKeyword,locationKeyword:i.locationKeyword,pageNum:s.pageNum,pageSize:s.pageSize},a=await ge(o);K.value=a.pageData,s.totalSize=a.totalSize,s.totalPage=a.totalPage,console.log("获取飞机列表成功:",K.value)}catch(o){console.error("获取飞机列表失败:",o),b.error("获取飞机列表失败")}finally{C.value=!1}},P=()=>{s.pageNum=1,m()},$=()=>{i.nameKeyword="",i.statusKeyword="",i.locationKeyword="",s.pageNum=1,m()},L=o=>{s.pageSize=o,s.pageNum=1,m()},O=o=>{s.pageNum=o,m()},R=()=>{A.value="添加飞机",y.value=!1,D(),_.value=!0},G=o=>{A.value="编辑飞机",y.value=!0,Object.assign(n,o),_.value=!0},H=o=>{me.confirm(`确定要删除飞机 "${o.airplaneName}" 吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{J(o.airplaneId)}).catch(()=>{b.info("已取消删除")})},J=async o=>{try{await ce(o),b.success("删除成功"),m()}catch(a){console.error("删除飞机失败:",a),b.error("删除失败")}},Q=()=>{z.value.validate(async o=>{if(o)try{await(y.value?_e(n):fe(n)),b.success(y.value?"修改成功":"添加成功"),_.value=!1,m()}catch(a){console.error("操作失败:",a),b.error(y.value?"修改失败":"添加失败")}})},I=()=>{_.value=!1,D()},D=()=>{Object.assign(n,{airplaneId:null,airplaneName:"",status:"",location:"",firstSeat:0,secondSeat:0,thirdSeat:0}),z.value&&z.value.clearValidate()};return le(()=>{m()}),(o,a)=>{const v=r("el-icon"),g=r("el-button"),N=r("el-input"),d=r("el-form-item"),f=r("el-option"),q=r("el-select"),F=r("el-form"),T=r("el-card"),p=r("el-table-column"),x=r("el-tag"),W=r("el-table"),X=r("el-pagination"),c=r("el-col"),k=r("el-row"),U=r("el-input-number"),Y=r("el-dialog"),Z=oe("loading");return E(),te("div",we,[S("div",be,[a[13]||(a[13]=S("h2",null,"飞机管理",-1)),e(g,{type:"primary",onClick:R},{default:l(()=>[e(v,null,{default:l(()=>[e(V(ne))]),_:1}),a[12]||(a[12]=u(" 添加飞机 "))]),_:1,__:[12]})]),e(T,{class:"search-card",shadow:"never"},{default:l(()=>[e(F,{model:i,inline:""},{default:l(()=>[e(d,{label:"飞机名称"},{default:l(()=>[e(N,{modelValue:i.nameKeyword,"onUpdate:modelValue":a[0]||(a[0]=t=>i.nameKeyword=t),placeholder:"请输入飞机名称",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(d,{label:"飞机状态"},{default:l(()=>[e(q,{modelValue:i.statusKeyword,"onUpdate:modelValue":a[1]||(a[1]=t=>i.statusKeyword=t),placeholder:"请选择状态",clearable:"",style:{width:"200px"}},{default:l(()=>[e(f,{label:"航行中",value:"航行中"}),e(f,{label:"维护中",value:"维护中"}),e(f,{label:"已着陆",value:"已着陆"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"所在位置"},{default:l(()=>[e(N,{modelValue:i.locationKeyword,"onUpdate:modelValue":a[2]||(a[2]=t=>i.locationKeyword=t),placeholder:"请输入位置",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:l(()=>[e(g,{type:"primary",onClick:P},{default:l(()=>[e(v,null,{default:l(()=>[e(V(re))]),_:1}),a[14]||(a[14]=u(" 搜索 "))]),_:1,__:[14]}),e(g,{onClick:$},{default:l(()=>[e(v,null,{default:l(()=>[e(V(se))]),_:1}),a[15]||(a[15]=u(" 重置 "))]),_:1,__:[15]})]),_:1})]),_:1},8,["model"])]),_:1}),e(T,{class:"table-card",shadow:"never"},{default:l(()=>[ie((E(),ue(W,{data:K.value,style:{width:"100%"},stripe:""},{default:l(()=>[e(p,{prop:"airplaneId",label:"飞机ID",width:"80"}),e(p,{prop:"airplaneName",label:"飞机名称",width:"120"}),e(p,{prop:"status",label:"状态",width:"100"},{default:l(t=>[e(x,{type:j(t.row.status),size:"small"},{default:l(()=>[u(h(t.row.status),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"location",label:"所在位置",width:"120"}),e(p,{prop:"belongedAirportName",label:"所属机场",width:"150"}),e(p,{label:"座位信息",width:"200"},{default:l(t=>[S("div",ye,[e(x,{size:"small",type:"success"},{default:l(()=>[u("头等舱: "+h(t.row.firstSeat),1)]),_:2},1024),e(x,{size:"small",type:"warning"},{default:l(()=>[u("商务舱: "+h(t.row.secondSeat),1)]),_:2},1024),e(x,{size:"small",type:"info"},{default:l(()=>[u("经济舱: "+h(t.row.thirdSeat),1)]),_:2},1024)])]),_:1}),e(p,{label:"总座位数",width:"100"},{default:l(t=>[u(h((t.row.firstSeat||0)+(t.row.secondSeat||0)+(t.row.thirdSeat||0)),1)]),_:1}),e(p,{label:"操作",width:"180",fixed:"right"},{default:l(t=>[e(g,{size:"small",onClick:ee=>G(t.row)},{default:l(()=>[e(v,null,{default:l(()=>[e(V(de))]),_:1}),a[16]||(a[16]=u(" 编辑 "))]),_:2,__:[16]},1032,["onClick"]),e(g,{size:"small",type:"danger",onClick:ee=>H(t.row)},{default:l(()=>[e(v,null,{default:l(()=>[e(V(pe))]),_:1}),a[17]||(a[17]=u(" 删除 "))]),_:2,__:[17]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Z,C.value]]),S("div",null,[e(X,{"current-page":s.pageNum,"onUpdate:currentPage":a[3]||(a[3]=t=>s.pageNum=t),"page-size":s.pageSize,"onUpdate:pageSize":a[4]||(a[4]=t=>s.pageSize=t),"page-sizes":[10,20,50,100],total:s.totalSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:L,onCurrentChange:O},null,8,["current-page","page-size","total"])])]),_:1}),e(Y,{title:A.value,modelValue:_.value,"onUpdate:modelValue":a[11]||(a[11]=t=>_.value=t),width:"800px","before-close":I},{footer:l(()=>[S("span",ve,[e(g,{onClick:I},{default:l(()=>a[18]||(a[18]=[u("取消")])),_:1,__:[18]}),e(g,{type:"primary",onClick:Q},{default:l(()=>a[19]||(a[19]=[u("确认")])),_:1,__:[19]})])]),default:l(()=>[e(F,{model:n,rules:M,ref_key:"airplaneFormRef",ref:z,"label-width":"120px"},{default:l(()=>[e(k,{gutter:20},{default:l(()=>[e(c,{span:12},{default:l(()=>[e(d,{label:"飞机名称",prop:"airplaneName"},{default:l(()=>[e(N,{modelValue:n.airplaneName,"onUpdate:modelValue":a[5]||(a[5]=t=>n.airplaneName=t),placeholder:"请输入飞机名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:l(()=>[e(d,{label:"飞机状态",prop:"status"},{default:l(()=>[e(q,{modelValue:n.status,"onUpdate:modelValue":a[6]||(a[6]=t=>n.status=t),placeholder:"请选择状态",style:{width:"100%"}},{default:l(()=>[e(f,{label:"航行中",value:"航行中"}),e(f,{label:"维护中",value:"维护中"}),e(f,{label:"已着陆",value:"已着陆"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(k,{gutter:20},{default:l(()=>[e(c,{span:24},{default:l(()=>[e(d,{label:"所在位置",prop:"location"},{default:l(()=>[e(N,{modelValue:n.location,"onUpdate:modelValue":a[7]||(a[7]=t=>n.location=t),placeholder:"请输入飞机位置"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(k,{gutter:20},{default:l(()=>[e(c,{span:8},{default:l(()=>[e(d,{label:"头等舱座位",prop:"firstSeat"},{default:l(()=>[e(U,{modelValue:n.firstSeat,"onUpdate:modelValue":a[8]||(a[8]=t=>n.firstSeat=t),min:0,max:999,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:8},{default:l(()=>[e(d,{label:"商务舱座位",prop:"secondSeat"},{default:l(()=>[e(U,{modelValue:n.secondSeat,"onUpdate:modelValue":a[9]||(a[9]=t=>n.secondSeat=t),min:0,max:999,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:8},{default:l(()=>[e(d,{label:"经济舱座位",prop:"thirdSeat"},{default:l(()=>[e(U,{modelValue:n.thirdSeat,"onUpdate:modelValue":a[10]||(a[10]=t=>n.thirdSeat=t),min:0,max:999,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},xe=ae(Se,[["__scopeId","data-v-6a657000"]]);export{xe as default};
