import{_ as P,x as T,r as v,B as q,c as Q,a as D,d as e,w as r,e as n,E as b,z as W,o as N,f,l as y,D as X,G as Z,H as c,m as h,h as ee,I as le,J as ae}from"./index-DuoLJuUX.js";import{d as re,e as de,f as te,u as oe}from"./airport-DZ6oIf4n.js";import"./request-DuNoOhOk.js";const ie={class:"airline-management"},ue={class:"page-header"},pe={class:"pagination-wrapper"},ne={__name:"AirportAirlineView",setup(me){const u=T({departureKeyword:"",arrivalKeyword:"",dateKeyword:"",pageNum:1,pageSize:10}),C=v([]),H=v(0),U=v(!1);function V(){U.value=!0,re({...u,pageNum:u.pageNum,pageSize:u.pageSize}).then(i=>{C.value=i.pageData||[],H.value=i.totalSize||0}).catch(()=>{b.error("获取航班信息失败")}).finally(()=>{U.value=!1})}function K(){u.pageNum=1,V()}function Y(){u.departureKeyword="",u.arrivalKeyword="",u.dateKeyword="",u.pageNum=1,V()}function G(i){u.pageSize=i,u.pageNum=1,V()}function S(i){u.pageNum=i,V()}const g=v(!1),o=T({airplaneId:"",arrivalAirportId:"",departureAirportId:"",boardingGate:"",price:"",departureTime:"",arrivalTime:"",date:"",duration:"",departure:"",arrival:""}),M=v();function F(){te(o).then(()=>{b.success("添加成功"),g.value=!1,V()}).catch(()=>{b.error("添加失败")})}const _=v(!1),d=T({airlineId:"",airplaneId:"",arrivalAirportId:"",departureAirportId:"",boardingGate:"",price:"",departureTime:"",arrivalTime:"",date:"",duration:"",departure:"",arrival:""}),B=v();function E(i){Object.assign(d,{airlineId:i.airlineId,airplaneId:i.airplaneId,arrivalAirportId:i.arrivalAirportId,departureAirportId:i.departureAirportId,boardingGate:i.boardingGate,price:i.price,departureTime:i.departureTime,arrivalTime:i.arrivalTime,date:i.date,duration:i.duration,departure:i.departure,arrival:i.arrival}),_.value=!0}function $(){oe(d).then(()=>{b.success("修改成功"),_.value=!1,V()}).catch(()=>{b.error("修改失败")})}function R(i){de(i.airlineId).then(()=>{b.success("删除成功"),V()}).catch(()=>{b.error("删除失败")})}return q(()=>{V()}),(i,l)=>{const I=n("el-icon"),s=n("el-button"),p=n("el-input"),t=n("el-form-item"),w=n("el-date-picker"),k=n("el-form"),x=n("el-card"),m=n("el-table-column"),j=n("el-table"),J=n("el-pagination"),A=n("el-time-picker"),z=n("el-dialog"),L=W("loading");return N(),Q("div",ie,[D("div",ue,[l[32]||(l[32]=D("h2",null,"航班管理",-1)),e(s,{type:"primary",onClick:l[0]||(l[0]=a=>g.value=!0),class:"add-btn"},{default:r(()=>[e(I,null,{default:r(()=>[e(y(X))]),_:1}),l[31]||(l[31]=f(" 增加航班 "))]),_:1,__:[31]})]),e(x,{class:"search-card",shadow:"never"},{default:r(()=>[e(k,{model:u,inline:""},{default:r(()=>[e(t,{label:"起点"},{default:r(()=>[e(p,{modelValue:u.departureKeyword,"onUpdate:modelValue":l[1]||(l[1]=a=>u.departureKeyword=a),placeholder:"请输入起点",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(t,{label:"终点"},{default:r(()=>[e(p,{modelValue:u.arrivalKeyword,"onUpdate:modelValue":l[2]||(l[2]=a=>u.arrivalKeyword=a),placeholder:"请输入终点",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(t,{label:"起飞日期"},{default:r(()=>[e(w,{modelValue:u.dateKeyword,"onUpdate:modelValue":l[3]||(l[3]=a=>u.dateKeyword=a),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DD",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(t,null,{default:r(()=>[e(s,{type:"primary",onClick:K},{default:r(()=>[e(I,null,{default:r(()=>[e(y(Z))]),_:1}),l[33]||(l[33]=f(" 搜索 "))]),_:1,__:[33]}),e(s,{onClick:Y},{default:r(()=>[e(I,null,{default:r(()=>[e(y(c))]),_:1}),l[34]||(l[34]=f(" 重置 "))]),_:1,__:[34]})]),_:1})]),_:1},8,["model"])]),_:1}),e(x,{class:"table-card",shadow:"never"},{default:r(()=>[h((N(),ee(j,{data:C.value,style:{width:"100%"},stripe:"",class:"airline-table"},{default:r(()=>[e(m,{prop:"airlineId",label:"航班号",width:"90"}),e(m,{prop:"departure",label:"起点",width:"90"}),e(m,{prop:"departureAirportName",label:"起飞机场","min-width":"120"}),e(m,{prop:"arrival",label:"终点",width:"90"}),e(m,{prop:"arrivalAirportName",label:"到达机场","min-width":"120"}),e(m,{prop:"date",label:"日期",width:"110"}),e(m,{prop:"departureTime",label:"起飞时间",width:"90"}),e(m,{prop:"arrivalTime",label:"到达时间",width:"90"}),e(m,{prop:"duration",label:"时长",width:"80"}),e(m,{prop:"price",label:"票价(元)",width:"100"}),e(m,{label:"操作",width:"180",fixed:"right"},{default:r(({row:a})=>[e(s,{type:"primary",size:"small",onClick:O=>E(a)},{default:r(()=>[e(I,null,{default:r(()=>[e(y(le))]),_:1}),l[35]||(l[35]=f(" 修改 "))]),_:2,__:[35]},1032,["onClick"]),e(s,{type:"danger",size:"small",onClick:O=>R(a),style:{"margin-left":"8px"}},{default:r(()=>[e(I,null,{default:r(()=>[e(y(ae))]),_:1}),l[36]||(l[36]=f(" 删除 "))]),_:2,__:[36]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[L,U.value]]),D("div",pe,[e(J,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:H.value,"page-size":u.pageSize,"current-page":u.pageNum,"page-sizes":[7,10,20],onSizeChange:G,onCurrentChange:S},null,8,["total","page-size","current-page"])])]),_:1}),e(z,{modelValue:g.value,"onUpdate:modelValue":l[16]||(l[16]=a=>g.value=a),title:"增加航班",width:"480px","close-on-click-modal":!1},{footer:r(()=>[e(s,{onClick:l[15]||(l[15]=a=>g.value=!1)},{default:r(()=>l[37]||(l[37]=[f("取消")])),_:1,__:[37]}),e(s,{type:"primary",onClick:F},{default:r(()=>l[38]||(l[38]=[f("确定")])),_:1,__:[38]})]),default:r(()=>[e(k,{model:o,"label-width":"110px",ref_key:"addFormRef",ref:M},{default:r(()=>[e(t,{label:"飞机ID",prop:"airplaneId"},{default:r(()=>[e(p,{modelValue:o.airplaneId,"onUpdate:modelValue":l[4]||(l[4]=a=>o.airplaneId=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"目的机场ID",prop:"arrivalAirportId"},{default:r(()=>[e(p,{modelValue:o.arrivalAirportId,"onUpdate:modelValue":l[5]||(l[5]=a=>o.arrivalAirportId=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"起飞机场ID",prop:"departureAirportId"},{default:r(()=>[e(p,{modelValue:o.departureAirportId,"onUpdate:modelValue":l[6]||(l[6]=a=>o.departureAirportId=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"登机口",prop:"boardingGate"},{default:r(()=>[e(p,{modelValue:o.boardingGate,"onUpdate:modelValue":l[7]||(l[7]=a=>o.boardingGate=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"基础价格",prop:"price"},{default:r(()=>[e(p,{modelValue:o.price,"onUpdate:modelValue":l[8]||(l[8]=a=>o.price=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"起飞时间",prop:"departureTime"},{default:r(()=>[e(A,{modelValue:o.departureTime,"onUpdate:modelValue":l[9]||(l[9]=a=>o.departureTime=a),placeholder:"选择起飞时间",format:"HH:mm:ss","value-format":"HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(t,{label:"降落时间",prop:"arrivalTime"},{default:r(()=>[e(A,{modelValue:o.arrivalTime,"onUpdate:modelValue":l[10]||(l[10]=a=>o.arrivalTime=a),placeholder:"选择降落时间",format:"HH:mm:ss","value-format":"HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(t,{label:"起飞日期",prop:"date"},{default:r(()=>[e(w,{modelValue:o.date,"onUpdate:modelValue":l[11]||(l[11]=a=>o.date=a),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(t,{label:"时长",prop:"duration"},{default:r(()=>[e(p,{modelValue:o.duration,"onUpdate:modelValue":l[12]||(l[12]=a=>o.duration=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"起点",prop:"departure"},{default:r(()=>[e(p,{modelValue:o.departure,"onUpdate:modelValue":l[13]||(l[13]=a=>o.departure=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"终点",prop:"arrival"},{default:r(()=>[e(p,{modelValue:o.arrival,"onUpdate:modelValue":l[14]||(l[14]=a=>o.arrival=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(z,{modelValue:_.value,"onUpdate:modelValue":l[30]||(l[30]=a=>_.value=a),title:"修改航班",width:"480px","close-on-click-modal":!1},{footer:r(()=>[e(s,{onClick:l[29]||(l[29]=a=>_.value=!1)},{default:r(()=>l[39]||(l[39]=[f("取消")])),_:1,__:[39]}),e(s,{type:"primary",onClick:$},{default:r(()=>l[40]||(l[40]=[f("保存")])),_:1,__:[40]})]),default:r(()=>[e(k,{model:d,"label-width":"110px",ref_key:"editFormRef",ref:B},{default:r(()=>[e(t,{label:"航班ID",prop:"airlineId"},{default:r(()=>[e(p,{modelValue:d.airlineId,"onUpdate:modelValue":l[17]||(l[17]=a=>d.airlineId=a),disabled:""},null,8,["modelValue"])]),_:1}),e(t,{label:"飞机ID",prop:"airplaneId"},{default:r(()=>[e(p,{modelValue:d.airplaneId,"onUpdate:modelValue":l[18]||(l[18]=a=>d.airplaneId=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"目的机场ID",prop:"arrivalAirportId"},{default:r(()=>[e(p,{modelValue:d.arrivalAirportId,"onUpdate:modelValue":l[19]||(l[19]=a=>d.arrivalAirportId=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"起飞机场ID",prop:"departureAirportId"},{default:r(()=>[e(p,{modelValue:d.departureAirportId,"onUpdate:modelValue":l[20]||(l[20]=a=>d.departureAirportId=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"登机口",prop:"boardingGate"},{default:r(()=>[e(p,{modelValue:d.boardingGate,"onUpdate:modelValue":l[21]||(l[21]=a=>d.boardingGate=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"基础价格",prop:"price"},{default:r(()=>[e(p,{modelValue:d.price,"onUpdate:modelValue":l[22]||(l[22]=a=>d.price=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"起飞时间",prop:"departureTime"},{default:r(()=>[e(A,{modelValue:d.departureTime,"onUpdate:modelValue":l[23]||(l[23]=a=>d.departureTime=a),placeholder:"选择起飞时间",format:"HH:mm:ss","value-format":"HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(t,{label:"降落时间",prop:"arrivalTime"},{default:r(()=>[e(A,{modelValue:d.arrivalTime,"onUpdate:modelValue":l[24]||(l[24]=a=>d.arrivalTime=a),placeholder:"选择降落时间",format:"HH:mm:ss","value-format":"HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(t,{label:"起飞日期",prop:"date"},{default:r(()=>[e(w,{modelValue:d.date,"onUpdate:modelValue":l[25]||(l[25]=a=>d.date=a),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(t,{label:"时长",prop:"duration"},{default:r(()=>[e(p,{modelValue:d.duration,"onUpdate:modelValue":l[26]||(l[26]=a=>d.duration=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"起点",prop:"departure"},{default:r(()=>[e(p,{modelValue:d.departure,"onUpdate:modelValue":l[27]||(l[27]=a=>d.departure=a)},null,8,["modelValue"])]),_:1}),e(t,{label:"终点",prop:"arrival"},{default:r(()=>[e(p,{modelValue:d.arrival,"onUpdate:modelValue":l[28]||(l[28]=a=>d.arrival=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},ve=P(ne,[["__scopeId","data-v-f364255b"]]);export{ve as default};
