import{_ as W,r as I,x as h,B as X,c as Y,a as b,d as e,w as l,e as u,E as C,z as Z,o as P,f as o,l as S,G as $,H as ee,m as le,h as ae,t as d,I as te}from"./index-DuoLJuUX.js";import{l as oe,m as de}from"./airport-DZ6oIf4n.js";import"./request-DuNoOhOk.js";const re={class:"order-management"},ne={style:{color:"#00ffe7","font-weight":"bold"}},ie={style:{color:"#00ffe7"}},se={class:"pagination-wrapper"},ue={class:"dialog-footer"},pe={class:"dialog-footer"},me={__name:"AirportOrderView",setup(_e){const N=I(!1),k=I([]),y=I(!1),w=I(!1),r=I({}),_=h({}),n=h({orderId:"",citizenName:"",customerId:"",airlineId:"",pageNum:1,pageSize:10}),p=h({pageNum:1,pageSize:10,totalSize:0,totalPage:0}),v=async()=>{try{N.value=!0;const i={orderId:n.orderId,citizenName:n.citizenName,customerId:n.customerId,airlineId:n.airlineId,pageNum:p.pageNum,pageSize:p.pageSize},a=await oe(i);k.value=a.pageData||[],p.totalSize=a.totalSize||0,p.totalPage=a.totalPage||0}catch{C.error("获取订单失败")}finally{N.value=!1}},A=()=>{p.pageNum=1,v()},j=()=>{n.orderId="",n.citizenName="",n.customerId="",n.airlineId="",p.pageNum=1,v()},F=i=>{p.pageSize=i,v()},G=i=>{p.pageNum=i,v()},L=i=>{r.value={...i},y.value=!0},M=i=>{Object.assign(_,i),w.value=!0},H=async()=>{try{await de(_),C.success("订单修改成功"),w.value=!1,v()}catch{C.error("订单修改失败")}},x=i=>{switch(i){case"已预订":return"info";case"已支付":return"success";case"已完成":return"primary";case"已取消":return"danger";default:return"default"}},T=i=>i?i.replace("T"," "):"";return X(()=>{v()}),(i,a)=>{const z=u("el-input"),f=u("el-form-item"),V=u("el-icon"),c=u("el-button"),O=u("el-form"),D=u("el-card"),m=u("el-table-column"),U=u("el-tag"),q=u("el-table"),J=u("el-pagination"),s=u("el-descriptions-item"),K=u("el-descriptions"),B=u("el-dialog"),g=u("el-option"),E=u("el-select"),Q=Z("loading");return P(),Y("div",re,[a[19]||(a[19]=b("div",{class:"page-header"},[b("h2",null,"订单管理")],-1)),e(D,{class:"search-card",shadow:"never"},{default:l(()=>[e(O,{model:n,inline:""},{default:l(()=>[e(f,{label:"订单号"},{default:l(()=>[e(z,{modelValue:n.orderId,"onUpdate:modelValue":a[0]||(a[0]=t=>n.orderId=t),placeholder:"请输入订单号",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(f,{label:"乘客姓名"},{default:l(()=>[e(z,{modelValue:n.citizenName,"onUpdate:modelValue":a[1]||(a[1]=t=>n.citizenName=t),placeholder:"请输入乘客姓名",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(f,{label:"客户用户Id"},{default:l(()=>[e(z,{modelValue:n.customerId,"onUpdate:modelValue":a[2]||(a[2]=t=>n.customerId=t),placeholder:"请输入客户用户Id",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(f,{label:"航线Id"},{default:l(()=>[e(z,{modelValue:n.airlineId,"onUpdate:modelValue":a[3]||(a[3]=t=>n.airlineId=t),placeholder:"请输入航线Id",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(f,null,{default:l(()=>[e(c,{type:"primary",onClick:A},{default:l(()=>[e(V,null,{default:l(()=>[e(S($))]),_:1}),a[12]||(a[12]=o(" 搜索 "))]),_:1,__:[12]}),e(c,{onClick:j},{default:l(()=>[e(V,null,{default:l(()=>[e(S(ee))]),_:1}),a[13]||(a[13]=o(" 重置 "))]),_:1,__:[13]})]),_:1})]),_:1},8,["model"])]),_:1}),e(D,{class:"table-card",shadow:"never"},{default:l(()=>[le((P(),ae(q,{data:k.value,style:{width:"100%"},stripe:"",class:"order-table"},{default:l(()=>[e(m,{prop:"orderId",label:"订单号",width:"90"}),e(m,{prop:"citizenName",label:"乘客姓名",width:"100"}),e(m,{prop:"citizenId",label:"证件号",width:"140"}),e(m,{prop:"airlineId",label:"航班ID",width:"80"}),e(m,{prop:"departure",label:"出发地",width:"90"}),e(m,{prop:"arrival",label:"目的地",width:"90"}),e(m,{prop:"seatType",label:"舱位",width:"80"}),e(m,{prop:"orderStat",label:"订单状态",width:"100"},{default:l(t=>[e(U,{type:x(t.row.orderStat),effect:"dark"},{default:l(()=>[o(d(t.row.orderStat),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"price",label:"票价",width:"90"},{default:l(t=>[b("span",ne,"¥"+d(t.row.price),1)]),_:1}),e(m,{prop:"spending",label:"实付",width:"90"},{default:l(t=>[b("span",ie,"¥"+d(t.row.spending),1)]),_:1}),e(m,{prop:"bookingTime",label:"下单时间",width:"160"},{default:l(t=>[o(d(T(t.row.bookingTime)),1)]),_:1}),e(m,{label:"操作",width:"180",fixed:"right"},{default:l(t=>[e(c,{size:"small",onClick:R=>L(t.row)},{default:l(()=>[e(V,null,{default:l(()=>[e(S($))]),_:1}),a[14]||(a[14]=o(" 详情 "))]),_:2,__:[14]},1032,["onClick"]),e(c,{size:"small",type:"primary",onClick:R=>M(t.row)},{default:l(()=>[e(V,null,{default:l(()=>[e(S(te))]),_:1}),a[15]||(a[15]=o(" 修改 "))]),_:2,__:[15]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,N.value]]),b("div",se,[e(J,{"current-page":p.pageNum,"onUpdate:currentPage":a[4]||(a[4]=t=>p.pageNum=t),"page-size":p.pageSize,"onUpdate:pageSize":a[5]||(a[5]=t=>p.pageSize=t),"page-sizes":[10,20,50,100],total:p.totalSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:F,onCurrentChange:G},null,8,["current-page","page-size","total"])])]),_:1}),e(B,{title:"订单详情",modelValue:y.value,"onUpdate:modelValue":a[7]||(a[7]=t=>y.value=t),width:"600px",class:"order-detail-dialog"},{footer:l(()=>[b("span",ue,[e(c,{onClick:a[6]||(a[6]=t=>y.value=!1)},{default:l(()=>a[16]||(a[16]=[o("关闭")])),_:1,__:[16]})])]),default:l(()=>[e(K,{column:2,border:""},{default:l(()=>[e(s,{label:"订单号"},{default:l(()=>[o(d(r.value.orderId),1)]),_:1}),e(s,{label:"航班ID"},{default:l(()=>[o(d(r.value.airlineId),1)]),_:1}),e(s,{label:"乘客姓名"},{default:l(()=>[o(d(r.value.citizenName),1)]),_:1}),e(s,{label:"证件号"},{default:l(()=>[o(d(r.value.citizenId),1)]),_:1}),e(s,{label:"出发地"},{default:l(()=>[o(d(r.value.departure),1)]),_:1}),e(s,{label:"目的地"},{default:l(()=>[o(d(r.value.arrival),1)]),_:1}),e(s,{label:"舱位"},{default:l(()=>[o(d(r.value.seatType),1)]),_:1}),e(s,{label:"票价"},{default:l(()=>[o("¥"+d(r.value.price),1)]),_:1}),e(s,{label:"实付"},{default:l(()=>[o("¥"+d(r.value.spending),1)]),_:1}),e(s,{label:"订单状态"},{default:l(()=>[e(U,{type:x(r.value.orderStat)},{default:l(()=>[o(d(r.value.orderStat),1)]),_:1},8,["type"])]),_:1}),e(s,{label:"下单时间"},{default:l(()=>[o(d(T(r.value.bookingTime)),1)]),_:1}),e(s,{label:"登机口"},{default:l(()=>[o(d(r.value.boardingGate),1)]),_:1}),e(s,{label:"出发时间"},{default:l(()=>[o(d(r.value.departureTime),1)]),_:1}),e(s,{label:"到达时间"},{default:l(()=>[o(d(r.value.arrivalTime),1)]),_:1}),e(s,{label:"飞行时长"},{default:l(()=>[o(d(r.value.duration),1)]),_:1}),e(s,{label:"座位号"},{default:l(()=>[o(d(r.value.seatId),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(B,{title:"修改订单["+_.orderId+"]",modelValue:w.value,"onUpdate:modelValue":a[11]||(a[11]=t=>w.value=t),width:"500px",class:"order-edit-dialog"},{footer:l(()=>[b("span",pe,[e(c,{onClick:a[10]||(a[10]=t=>w.value=!1)},{default:l(()=>a[17]||(a[17]=[o("取消")])),_:1,__:[17]}),e(c,{type:"primary",onClick:H},{default:l(()=>a[18]||(a[18]=[o("保存")])),_:1,__:[18]})])]),default:l(()=>[e(O,{model:_,"label-width":"100px"},{default:l(()=>[e(f,{label:"舱位类型"},{default:l(()=>[e(E,{modelValue:_.seatType,"onUpdate:modelValue":a[8]||(a[8]=t=>_.seatType=t),style:{width:"100%"}},{default:l(()=>[e(g,{label:"头等舱",value:"头等舱"}),e(g,{label:"商务舱",value:"商务舱"}),e(g,{label:"经济舱",value:"经济舱"})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"订单状态"},{default:l(()=>[e(E,{modelValue:_.orderStat,"onUpdate:modelValue":a[9]||(a[9]=t=>_.orderStat=t),style:{width:"100%"}},{default:l(()=>[e(g,{label:"已预订",value:"已预订"}),e(g,{label:"已支付",value:"已支付"}),e(g,{label:"已完成",value:"已完成"}),e(g,{label:"已取消",value:"已取消"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}},be=W(me,[["__scopeId","data-v-23a24e0b"]]);export{be as default};
